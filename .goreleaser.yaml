version: 2

builds:
  - main: .
    binary: homebutler
    env:
      - CGO_ENABLED=0
    goos:
      - linux
      - darwin
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w -X main.version={{.Version}} -X main.buildDate={{.Date}}

archives:
  - format: tar.gz
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"

checksum:
  name_template: checksums.txt

release:
  header: |
    ## HomeButler {{ .Tag }}

    **Manage your homelab from any AI â€” one binary, zero dependencies.**

    ### Install / Upgrade

    ```bash
    # Already installed? Just run:
    homebutler upgrade

    # Fresh install
    brew install Higangssh/homebutler/homebutler
    # or
    curl -fsSL https://raw.githubusercontent.com/Higangssh/homebutler/main/install.sh | sh
    # or
    npm install -g homebutler
    ```

    ### MCP (Claude Desktop / Cursor / Claude Code)
    ```json
    { "mcpServers": { "homebutler": { "command": "npx", "args": ["-y", "homebutler@latest"] } } }
    ```
  footer: |
    ---
    **Full Changelog**: https://github.com/Higangssh/homebutler/compare/{{ .PreviousTag }}...{{ .Tag }}

    **All install methods**: See [README](https://github.com/Higangssh/homebutler#installation)

changelog:
  sort: asc
  use: github
  groups:
    - title: "ğŸš€ Features"
      regexp: '^.*?feat(\(.+\))??!?:.+$'
      order: 0
    - title: "ğŸ› Bug Fixes"
      regexp: '^.*?fix(\(.+\))??!?:.+$'
      order: 1
    - title: "ğŸ”’ Security"
      regexp: '^.*?security(\(.+\))??!?:.+$'
      order: 2
    - title: "ğŸ“¦ Others"
      order: 999
  filters:
    exclude:
      - "^docs:"
      - "^chore:"
      - "^test:"
      - "^style:"
      - "^ci:"
